"use strict";(self.webpackChunkzano_docs=self.webpackChunkzano_docs||[]).push([[6654],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=p(n),c=a,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||l;return n?o.createElement(k,i(i({ref:t},d),{},{components:n})):o.createElement(k,i({ref:t},d))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=c;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[u]="string"==typeof e?e:a,i[1]=r;for(var p=2;p<l;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5375:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>p});var o=n(7462),a=(n(7294),n(3905));const l={sidebar_position:2},i="Guide: Stake Zano automatically on system startup",r={unversionedId:"stake/advanced-setup/stake-zano-on-boot",id:"stake/advanced-setup/stake-zano-on-boot",title:"Guide: Stake Zano automatically on system startup",description:"Introduction",source:"@site/docs/stake/advanced-setup/stake-zano-on-boot.mdx",sourceDirName:"stake/advanced-setup",slug:"/stake/advanced-setup/stake-zano-on-boot",permalink:"/zano-docs/docs/stake/advanced-setup/stake-zano-on-boot",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"stakeSidebar",previous:{title:"Server/Console mode Staking",permalink:"/zano-docs/docs/stake/advanced-setup/remote-server-pos"},next:{title:"Security & Best Practices",permalink:"/zano-docs/docs/category/security--best-practices"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Install Node.js &amp; NPM",id:"install-nodejs--npm",level:2},{value:"Windows",id:"windows",level:3},{value:"Linux",id:"linux",level:3},{value:"How to Install Node.js and NPM from Ubuntu repository",id:"how-to-install-nodejs-and-npm-from-ubuntu-repository",level:4},{value:"How to Install Node.js and NPM on Arch based distro",id:"how-to-install-nodejs-and-npm-on-arch-based-distro",level:4},{value:"Install the latest version of PM2 using NPM",id:"install-the-latest-version-of-pm2-using-npm",level:2},{value:"Windows",id:"windows-1",level:3},{value:"Linux",id:"linux-1",level:3},{value:"Get the Zano Binaries",id:"get-the-zano-binaries",level:2},{value:"Windows",id:"windows-2",level:3},{value:"Linux",id:"linux-2",level:3},{value:"Set your Zano CLI wallet",id:"set-your-zano-cli-wallet",level:2},{value:"Automate processes with PM2",id:"automate-processes-with-pm2",level:2},{value:"Start zanod",id:"start-zanod",level:3},{value:"Windows",id:"windows-3",level:4},{value:"Linux",id:"linux-3",level:4},{value:"Start simplewallet",id:"start-simplewallet",level:3},{value:"Windows",id:"windows-4",level:4},{value:"Linux",id:"linux-4",level:4},{value:"PM2 tips",id:"pm2-tips",level:3},{value:"Persist processes to run on startup",id:"persist-processes-to-run-on-startup",level:2},{value:"Windows",id:"windows-5",level:4},{value:"Linux",id:"linux-5",level:4},{value:"How to disable run on startup",id:"how-to-disable-run-on-startup",level:3},{value:"Windows",id:"windows-6",level:4},{value:"Linux",id:"linux-6",level:4},{value:"Monitor your staking",id:"monitor-your-staking",level:2},{value:"Things to note",id:"things-to-note",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:p},u="wrapper";function m(e){let{components:t,...l}=e;return(0,a.kt)(u,(0,o.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"guide-stake-zano-automatically-on-system-startup"},"Guide: Stake Zano automatically on system startup"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"Staking is an important aspect of Zano, users should be able to effortlessly stake their Zano upon system startup without any intervention, for this we'll use PM2. PM2 makes it possible to daemonize applications so that they will run in the background as a service."),(0,a.kt)("h2",{id:"install-nodejs--npm"},"Install Node.js & NPM"),(0,a.kt)("p",null,"We'll also need Node.js, Installing Node.js and NPM is super easy, simply head over to the download page and download the relevant version, their website allows you to download Node.js the way you want."),(0,a.kt)("h3",{id:"windows"},"Windows"),(0,a.kt)("p",null,"Download Node.js from ",(0,a.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/prebuilt-installer"},"https://nodejs.org/en/download/prebuilt-installer"),", NPM is included by default."),(0,a.kt)("p",null,"Alternatively, we can download it from a repository if using Linux:"),(0,a.kt)("h3",{id:"linux"},"Linux"),(0,a.kt)("h4",{id:"how-to-install-nodejs-and-npm-from-ubuntu-repository"},"How to Install Node.js and NPM from Ubuntu repository"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo apt update\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo apt install nodejs npm\n")),(0,a.kt)("h4",{id:"how-to-install-nodejs-and-npm-on-arch-based-distro"},"How to Install Node.js and NPM on Arch based distro"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo pacman -S npm nodejs\n")),(0,a.kt)("p",null,"You can now type the following to ensure they're installed and check version:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"node -v\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm -v\n")),(0,a.kt)("h2",{id:"install-the-latest-version-of-pm2-using-npm"},"Install the latest version of PM2 using NPM"),(0,a.kt)("h3",{id:"windows-1"},"Windows"),(0,a.kt)("p",null,'Press your Windows key and search for "Powershell" and hit enter to open the terminal, paste the following command, hit enter to run it:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm install pm2@latest -g\nnpm install pm2-windows-startup -g\npm2-startup install\n")),(0,a.kt)("h3",{id:"linux-1"},"Linux"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo npm install pm2@latest -g\n")),(0,a.kt)("h2",{id:"get-the-zano-binaries"},"Get the Zano Binaries"),(0,a.kt)("p",null,"We need to get the zanod and simplewallet binaries in order to run things in CLI mode."),(0,a.kt)("h3",{id:"windows-2"},"Windows"),(0,a.kt)("p",null,"Head to ",(0,a.kt)("a",{parentName:"p",href:"https://zano.org/downloads"},"https://zano.org/downloads"),", download the .ZIP file for Windows and extract it in a folder."),(0,a.kt)("h3",{id:"linux-2"},"Linux"),(0,a.kt)("p",null,"Binaries can be extracted from the AppImage available on ",(0,a.kt)("a",{parentName:"p",href:"https://zano.org/downloads"},"https://zano.org/downloads")," or the GitHub repository, see the following steps to extract from the AppImage:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Go to the folder containing the Zano wallet AppImage file and mark it as executable by right-clicking it: ",(0,a.kt)("inlineCode",{parentName:"p"},"Properties > Permissions > 'Allow executing file as program'"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Rename the file to ",(0,a.kt)("inlineCode",{parentName:"p"},"zano-linux.AppImage"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open a terminal inside that same folder and type the following command:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"./zano-linux.AppImage --appimage-mount\n")),(0,a.kt)("p",null,"Which will then show you a temp mountpoint, this will look something like:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/tmp/.mount_zano-lHATDRi")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Navigate to this folder, (you may need to check ",(0,a.kt)("strong",{parentName:"li"},"'show hidden files'"),") then go to the  ",(0,a.kt)("inlineCode",{parentName:"li"},"usr > bin")," folder and copy zanod and simplewallet to a folder of your choosing.")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(9762).Z,width:"825",height:"255"})),(0,a.kt)("h2",{id:"set-your-zano-cli-wallet"},"Set your Zano CLI wallet"),(0,a.kt)("p",null,"Open a terminal (PowerShell on Windows) from the folder containing the zanod and simplewallet binaries (Extracted .zip on Windows)."),(0,a.kt)("admonition",{title:"How to open PowerShell from inside a folder on Windows",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Open the folder, then while holding ",(0,a.kt)("inlineCode",{parentName:"p"},"shift-key"),", right-click on an empty space inside the folder and select ",(0,a.kt)("inlineCode",{parentName:"p"},"Open PowerShell window here"),".")),(0,a.kt)("p",null,"Inside the terminal paste the following command (change example.wallet to a name for your wallet file):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"./simplewallet --restore-wallet example.wallet\n")),(0,a.kt)("p",null,"You will be prompted to create a password for it, once you do, it will ask you to enter your wallet's seedphrase."),(0,a.kt)("p",null,"Exit simplewallet by pressing ",(0,a.kt)("inlineCode",{parentName:"p"},"Ctrl key")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"C")),(0,a.kt)("h2",{id:"automate-processes-with-pm2"},"Automate processes with PM2"),(0,a.kt)("p",null,"Now we want to start both zanod and simplewallet using PM2 process manager."),(0,a.kt)("h3",{id:"start-zanod"},"Start zanod"),(0,a.kt)("p",null,"Inside the previously opened terminal, paste the following commands:"," "),(0,a.kt)("h4",{id:"windows-3"},"Windows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start zanod.exe\n")),(0,a.kt)("h4",{id:"linux-3"},"Linux"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start zanod\n")),(0,a.kt)("h3",{id:"start-simplewallet"},"Start simplewallet"),(0,a.kt)("p",null,"In the command below, replace ",(0,a.kt)("inlineCode",{parentName:"p"},"example.wallet")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"<password> "),"with your corresponding ones."),(0,a.kt)("h4",{id:"windows-4"},"Windows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start simplewallet.exe -- start -- --wallet-file example.wallet --password <password> --rpc-bind-ip 127.0.0.1 --rpc-bind-port 11212 --daemon-address 127.0.0.1:11211 --do-pos-mining\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The error: ",(0,a.kt)("inlineCode",{parentName:"p"},"Script not found: ...\\start")," is expected, you can ignore it.")),(0,a.kt)("h4",{id:"linux-4"},"Linux"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start simplewallet -- --wallet-file example.wallet  --password <password> --rpc-bind-ip 127.0.0.1  --rpc-bind-port 11212  --daemon-address 127.0.0.1:11211 --do-pos-mining\n")),(0,a.kt)("h3",{id:"pm2-tips"},"PM2 tips"),(0,a.kt)("p",null,"Now both of our processes are daemonized and running in the background at all times, we can monitor and manage our processes, using the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 list\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 monit\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 stop <ID>\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start <ID>\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(799).Z,width:"1275",height:"679"})),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(1102).Z,width:"1270",height:"681"})),(0,a.kt)("p",null,"This isn't an extensive howto on PM2, check here to learn more on PM2:"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://devhints.io/pm2"},"https://devhints.io/pm2")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://pm2.keymetrics.io/docs/usage/quick-start/"},"https://pm2.keymetrics.io/docs/usage/quick-start/")),(0,a.kt)("h2",{id:"persist-processes-to-run-on-startup"},"Persist processes to run on startup"),(0,a.kt)("p",null,"In order to persist zanod and simplewallet to auto-run on startup, run the following command:"),(0,a.kt)("h4",{id:"windows-5"},"Windows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 save\n")),(0,a.kt)("h4",{id:"linux-5"},"Linux"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 save\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 startup\n")),(0,a.kt)("p",null,"You may then be prompted to enter another command by PM2, copy and paste this command:"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(8510).Z,width:"1211",height:"333"})),(0,a.kt)("p",null,"It will look something like:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u anon --hp /home/anon")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Yours will differ, use the command you are given.")),(0,a.kt)("h3",{id:"how-to-disable-run-on-startup"},"How to disable run on startup"),(0,a.kt)("p",null,"In case you no longer want the process to start on boot, use the following commands"),(0,a.kt)("h4",{id:"windows-6"},"Windows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 cleardump\npm2 save\n")),(0,a.kt)("p",null,"(To re-enable it you will need to follow the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.zano.org/docs/stake/stake-zano-on-boot#automate-processes-with-pm2"},"steps")," to start zanod and simplewallet again)"),(0,a.kt)("h4",{id:"linux-6"},"Linux"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 unstartup\n")),(0,a.kt)("h2",{id:"monitor-your-staking"},"Monitor your staking"),(0,a.kt)("p",null,"Open ",(0,a.kt)("inlineCode",{parentName:"p"},"simplewallet.txt")," inside the folder you have been working on to check your staking activity, it should look something like this (after your node finishes syncing):"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"[Date/time] [RPC0][W:ZxDxxx] PoS mining: 0 iterations finished (0.00s), status: NOT_FOUND, 0 entries with total amount: 0.0")),(0,a.kt)("h2",{id:"things-to-note"},"Things to note"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"If you want to open your Zano desktop wallet (GUI)"),", you will need to stop the processes otherwise your wallet will not start, you can start and stop the processes using the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 stop <ID>\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pm2 start <ID>\n")),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"You're now staking your Zano, on system startup automatically."))}m.isMDXComponent=!0},9762:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/extracted-zano-binaries-30b7f5c7132cfb8619f6b0552d690257.png"},799:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pm2-list-4ede39d8ac86f3a64a4f2aca4cba27f2.jpg"},1102:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pm2-monit-96a62615148562d9eb24b25d0c288822.png"},8510:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pm2-startup-9cd195198d5fb2144106cfc85ffd05b4.png"}}]);